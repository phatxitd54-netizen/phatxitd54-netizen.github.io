<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Shaka Player DASH</title>

  <!-- Shaka Player -->
  <script src="https://cdn.jsdelivr.net/npm/shaka-player@4.16.14/dist/shaka-player.compiled.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/shaka-player@4.16.14/dist/controls.min.css" rel="stylesheet">

  <style>
    body {
      background: #111;
      color: #fff;
      font-family: sans-serif;
      padding: 10px;
    }
    input, button {
      width: 100%;
      margin: 5px 0;
      padding: 8px;
      font-size: 14px;
    }
    #video-container {
      width: 100%;
      max-width: 800px;
      margin: auto;
    }
    video {
      width: 100%;
      height: auto;
      background: black;
    }
  </style>
</head>
<body>

<h3>ðŸŽ¥ Shaka DASH Player</h3>

<input id="mpd" placeholder="Nháº­p link MPD (.mpd)">
<input id="key" placeholder="Nháº­p KID:KEY (vd: kid:key)">

<button onclick="loadVideo()">â–¶ PhÃ¡t</button>

<div id="video-container">
  <video id="video"></video>
</div>

<script>
  const video = document.getElementById("video");
  const container = document.getElementById("video-container");

  shaka.polyfill.installAll();

  if (!shaka.Player.isBrowserSupported()) {
    alert("TrÃ¬nh duyá»‡t khÃ´ng há»— trá»£ Shaka Player!");
  }

  const player = new shaka.Player(video);
  const ui = new shaka.ui.Overlay(player, container, video);

  ui.configure({
    controlPanelElements: [
      'play_pause',
      'time_and_duration',
      'mute',
      'volume',
      'fullscreen'
    ]
  });

  async function loadVideo() {
    const mpd = document.getElementById("mpd").value.trim();
    const keyInput = document.getElementById("key").value.trim();

    if (!mpd) {
      alert("ChÆ°a nháº­p link MPD!");
      return;
    }

    if (keyInput) {
      const [kid, key] = keyInput.split(":");

      player.configure({
        drm: {
          clearKeys: {
            [kid]: key
          }
        }
      });
    }

    try {
      await player.load(mpd);
      console.log("Video Ä‘Ã£ load");
    } catch (e) {
      console.error(e);
      alert("Lá»—i load video!");
    }
  }
</script>

</body>
    </html>
  
